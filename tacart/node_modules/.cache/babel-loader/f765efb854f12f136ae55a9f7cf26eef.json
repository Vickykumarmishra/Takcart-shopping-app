{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar utils = require('@motionone/utils');\nvar info = require('./info.cjs.js');\nvar index = require('./offsets/index.cjs.js');\nfunction _measure(container) {\n  var target = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : container;\n  var info = arguments.length > 2 ? arguments[2] : undefined;\n  /**\n   * Find inset of target within scrollable container\n   */\n  info.x.targetOffset = 0;\n  info.y.targetOffset = 0;\n  if (target !== container) {\n    var node = target;\n    while (node && node != container) {\n      info.x.targetOffset += node.offsetLeft;\n      info.y.targetOffset += node.offsetTop;\n      node = node.offsetParent;\n    }\n  }\n  info.x.targetLength = target === container ? target.scrollWidth : target.clientWidth;\n  info.y.targetLength = target === container ? target.scrollHeight : target.clientHeight;\n  info.x.containerLength = container.clientWidth;\n  info.y.containerLength = container.clientHeight;\n}\nfunction createOnScrollHandler(element, onScroll, info$1) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var axis = options.axis || \"y\";\n  return {\n    measure: function measure() {\n      return _measure(element, options.target, info$1);\n    },\n    update: function update(time) {\n      info.updateScrollInfo(element, info$1, time);\n      if (options.offset || options.target) {\n        index.resolveOffsets(element, info$1, options);\n      }\n    },\n    notify: utils.isFunction(onScroll) ? function () {\n      return onScroll(info$1);\n    } : scrubAnimation(onScroll, info$1[axis])\n  };\n}\nfunction scrubAnimation(controls, axisInfo) {\n  controls.pause();\n  controls.forEachNative(function (animation, _ref) {\n    var easing = _ref.easing;\n    var _a, _b;\n    if (animation.updateDuration) {\n      if (!easing) animation.easing = utils.noopReturn;\n      animation.updateDuration(1);\n    } else {\n      var timingOptions = {\n        duration: 1000\n      };\n      if (!easing) timingOptions.easing = \"linear\";\n      (_b = (_a = animation.effect) === null || _a === void 0 ? void 0 : _a.updateTiming) === null || _b === void 0 ? void 0 : _b.call(_a, timingOptions);\n    }\n  });\n  return function () {\n    controls.currentTime = axisInfo.progress;\n  };\n}\nexports.createOnScrollHandler = createOnScrollHandler;","map":null,"metadata":{},"sourceType":"script"}